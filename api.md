<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

## MediaServer

### setCertificate

Set new DTLS certificates. Should be called before any Endpoint is established.

#### Parameters

-   `cert` **[String][1]** path of the certificate file
-   `key` **[String][1]** path of the key file

### terminate

Close async handlers so nodejs can exit nicely
Only call it once!

### enableLog

Enable or disable log level traces

#### Parameters

-   `flag` **[Boolean][2]** 

### enableDebug

Enable or disable debug level traces

#### Parameters

-   `flag` **[Boolean][2]** 

### setPortRange

Set UDP port range for encpoints

#### Parameters

-   `minPort` **Integer** Min UDP port
-   `maxPort` **Integer** Max UDP port [Optional]

### enableUltraDebug

Enable or disable ultra debug level traces

#### Parameters

-   `flag` **[Boolean][2]** 

### createEndpoint

Create a new endpoint object

#### Parameters

-   `ip` **[String][1]** External IP address of server, to be used when announcing the local ICE candidate

Returns **[Endpoint][3]** The new created endpoing

### createRecorder

Create a new MP4 recorder

#### Parameters

-   `filename` **[String][1]** Path and filename of the recorded mp4 file
-   `params` **[Object][4]** Recording parameters (Optional)
    -   `params.refresh` **[Number][5]** Periodically refresh an intra on all video tracks (in ms)
    -   `params.waitForIntra` **[Boolean][2]** Wait until first video iframe is received to start recording media
    -   `params.timeShift` **[Number][5]** Buffer time in ms. Recording must be splicity started with flush() call
    -   `params.disableHints` **[Boolean][2]** Disable recording hint tracks. Note that this file won't be playable with the Player object;

Returns **[Recorder][6]** 

### createPlayer

Create a new MP4 player

#### Parameters

-   `filename` **[String][1]** Path and filename of the mp4 file

Returns **[Player][7]** 

### createStreamer

Create a new RTP streamer

Returns **[Streamer][8]** 

### createActiveSpeakerDetector

Create a new Active Speaker Detecrtor

### createRefresher

Create a new stream refresher

#### Parameters

-   `period` **type** Intra refresh period

### createEmulatedTransport

Create a new emulated transport from pcap file

#### Parameters

-   `pcap`  
-   `filename` **[String][1]** PCAP filename and path

### getDefaultCapabilities

Get the default media server capabilities for each supported media type

Returns **[Object][4]** Object containing the capabilities by media ("audio","video")

## SDPManager

SDPManager

### getState

Get current SDP offer/answer state

Returns **[String][1]** one of "initial","local-offer","remote-offer","stabable".

### getTransport

Returns the Transport object created by the SDP O/A

Returns **[Transport][9]** 

### on

Add event listener

#### Parameters

-   `event` **[String][1]** Event name
-   `listeener` **[function][10]** Event listener

Returns **[SDPManager][11]** 

### once

Add event listener once

#### Parameters

-   `event` **[String][1]** Event name
-   `listener` **[function][10]** Event listener

Returns **[IncomingStream][12]** 

### off

Remove event listener

#### Parameters

-   `event` **[String][1]** Event name
-   `listener` **[function][10]** Event listener

Returns **[SDPManager][11]** 

### stop

Stop manager and associated tranports

## RecorderTrack

Track of the recorder associated to an incoming strem track

### getId

Get recorder track id

### getTrack

Get incoming stream track

Returns **[IncomingStreamTrack][13]** 

### getEncoding

Get incoming encoding

Returns **[Object][4]** 

### isMuted

Check if the track is muted or not

Returns **[boolean][2]** muted

### mute

Mute/Unmute track
This operation will not change the muted state of the stream this track belongs too.

#### Parameters

-   `muting` **[boolean][2]** if we want to mute or unmute

### on

Add event listener

#### Parameters

-   `event` **[String][1]** Event name
-   `listener` **[function][10]** Event listener

Returns **[RecorderTrack][14]** 

### once

Add event listener once

#### Parameters

-   `event` **[String][1]** Event name
-   `listener` **[function][10]** Event listener

Returns **[RecorderTrack][14]** 

### off

Remove event listener

#### Parameters

-   `event` **[String][1]** Event name
-   `listener` **[function][10]** Event listener

Returns **[RecorderTrack][14]** 

### stop

Stop recording this track

## ActiveSpeakerDetector

ActiveSpeakerDetector accumulate received voice activity and fires an event when it changes

### setMinChangePeriod

Set minimum period between active speaker changes

#### Parameters

-   `minChangePeriod` **[Number][5]** 

### setMaxAccumulatedScore

Maximux activity score accumulated by an speaker

#### Parameters

-   `maxAcummulatedScore` **[Number][5]** 

### setNoiseGatingThreshold

Minimum db level to not be considered as muted

#### Parameters

-   `noiseGatingThreshold` **[Number][5]** 

### setMinActivationScore

Set minimum activation score to be electible as active speaker

#### Parameters

-   `minActivationScore` **[Number][5]** 

### addSpeaker

Add incoming track for speaker detection

#### Parameters

-   `track` **[IncomingStreamTrack][13]** 

### removeSpeaker

Remove track from speaker detection

#### Parameters

-   `track` **IncomingStreamTrakc** 

### on

Add event listener

#### Parameters

-   `event` **[String][1]** Event name
-   `listener` **[function][10]** Event listener

Returns **[IncomingStreamTrack][13]** 

### once

Add event listener once

#### Parameters

-   `event` **[String][1]** Event name
-   `listener` **[function][10]** Event listener

Returns **[IncomingStream][12]** 

### off

Remove event listener

#### Parameters

-   `event` **[String][1]** Event name
-   `listener` **[function][10]** Event listener

Returns **[IncomingStreamTrack][13]** 

### stop

Stop this transponder, will dettach the OutgoingStreamTrack

## Transponder

Transponder copies data from an incoming track to an outgoing track and allows stream modifications

### setIncomingTrack

Set incoming track

#### Parameters

-   `track` **[IncomingStreamTrack][13]** 

### getIncomingTrack

Get attached track

Returns **[IncomingStreamTrack][13]** track

### getAvailableLayers

Get available encodings and layers

Returns **[Object][4]** 

### isMuted

Check if the track is muted or not

Returns **[boolean][2]** muted

### mute

Mute/Unmute track
This operation will not change the muted state of the stream this track belongs too.

#### Parameters

-   `muting` **[boolean][2]** if we want to mute or unmute

### setTargetBitrate

Select encoding and temporal and spatial layers based on the desired bitrate. This operation will unmute the transponder if it was mutted and it is possible to select an encoding and layer based on the target bitrate and options.

#### Parameters

-   `target`  
-   `options` **[Object][4]** Options for configuring algorithm to select best encoding/layers [Optional]
    -   `options.traversal` **[Object][4]** Traversal algorithm "default", "spatial-temporal", "zig-zag-spatial-temporal", "temporal-spatial", "zig-zag-temporal-spatial" [Default: "default"]
    -   `options.strict` **[Object][4]** If there is not a layer with a bitrate lower thatn target, stop sending media [Default: false]
-   `bitrate` **[Number][5]** 

Returns **[Number][5]** Current bitrate of the selected encoding and layers, it aslo incudes the selected layer indexes and available layers as properties of the Number object.

### getSelectedtEncoding

Return the encoding that is being forwarded

Returns **[String][1]** encodingId

### getSelectedSpatialLayerId

Return the spatial layer id that is being forwarded

Returns **[Number][5]** spatial layer id

### getSelectedTemporalLayerId

Return the temporal layer id that is being forwarded

Returns **[Number][5]** temporal layer id

### selectLayer

Select SVC temporatl and spatial layers. Only available for VP9 media.

#### Parameters

-   `spatialLayerId` **[Number][5]** The spatial layer id to send to the outgoing stream
-   `temporalLayerId` **[Number][5]** The temporaral layer id to send to the outgoing stream

### setMaximumLayers

Set maximum statial and temporal layers to be forwrarded. Base layer is always enabled.

#### Parameters

-   `maxSpatialLayerId` **[Number][5]** Max spatial layer id
-   `maxTemporalLayerId` **[Number][5]** Max temporal layer id

### on

Add event listener

#### Parameters

-   `event` **[String][1]** Event name
-   `listener` **[function][10]** Event listener

Returns **[IncomingStreamTrack][13]** 

### once

Add event listener once

#### Parameters

-   `event` **[String][1]** Event name
-   `listener` **[function][10]** Event listener

Returns **[IncomingStream][12]** 

### off

Remove event listener

#### Parameters

-   `event` **[String][1]** Event name
-   `listener` **[function][10]** Event listener

Returns **[IncomingStreamTrack][13]** 

### stop

Stop this transponder, will dettach the OutgoingStreamTrack

## Refresher

Periodically request an I frame on all incoming stream or tracks

### add

Add stream or track to request

#### Parameters

-   `streamOrTrack` **(IncomintgStream | [IncomingStreamTrack][13])** 

### on

Add event listener

#### Parameters

-   `event` **[String][1]** Event name
-   `listener` **[function][10]** Event listener

Returns **[IncomingStream][12]** 

### once

Add event listener once

#### Parameters

-   `event` **[String][1]** Event name
-   `listener` **[function][10]** Event listener

Returns **[IncomingStream][12]** 

### off

Remove event listener

#### Parameters

-   `event` **[String][1]** Event name
-   `listener` **[function][10]** Event listener

Returns **[OutgoingStream][15]** 

### stop

Stop refresher

## Streamer

An streamer allows to send and receive plain RTP over udp sockets.
This allows both to bridge legacy enpoints or integrate streaming/broadcasting services.

### createSession

Creates a new streaming session from a media description

#### Parameters

-   `media` **MediaInfo** Media codec description info
-   `params` **[Object][4]** Network parameters [Optional]
    -   `params.local` **[Object][4]** Local parameters
        -   `params.local.port` **[Number][5]** receiving port
    -   `params.remote` **[Object][4]** Remote parameters
        -   `params.remote.ip` **[String][1]** Sending ip address
        -   `params.remote.port` **[Number][5]** Sending port
    -   `params.noRTCP` **[Number][5]** Disable sending rtcp

Returns **[StreamerSession][16]** The new streaming session

### on

Add event listener

#### Parameters

-   `event` **[String][1]** Event name
-   `listeener` **[function][10]** Event listener

Returns **[Endpoint][3]** 

### once

Add event listener once

#### Parameters

-   `event` **[String][1]** Event name
-   `listener` **[function][10]** Event listener

Returns **[Endpoint][3]** 

### off

Remove event listener

#### Parameters

-   `event` **[String][1]** Event name
-   `listener` **[function][10]** Event listener

Returns **[Endpoint][3]** 

### stop

Stop all streaming sessions and frees resources

## Recorder

MP4 recorder that allows to record several streams/tracks on a single mp4 file

### getFilename

Get recording filename

Returns **[String][1]** 

### getStartTime

Get recording filename

Returns **[Date][17]** 

### isTimeShifted

Is the recording time shifted?

Returns **[Boolean][2]** 

### flush

Start recording time shiftt buffer.

#### Parameters

-   `filename` **[String][1]** Override filename [Optional]

### record

Start recording and incoming

#### Parameters

-   `incomingStreamOrTrack` **([IncomingStream][12] \| [IncomingStreamTrack][13])** Incomining stream or track to be recordeds

Returns **[Array][18]&lt;[RecorderTrack][14]>** 

### mute

Mute/Unmute all tracks
This operation will not change the muted state of the stream this track belongs too.

#### Parameters

-   `muting` **[boolean][2]** if we want to mute or unmute

### on

Add event listener

#### Parameters

-   `event` **[String][1]** Event name
-   `listener` **[function][10]** Event listener

Returns **[Recorder][6]** 

### once

Add event listener once

#### Parameters

-   `event` **[String][1]** Event name
-   `listener` **[function][10]** Event listener

Returns **[Recorder][6]** 

### off

Remove event listener

#### Parameters

-   `event` **[String][1]** Event name
-   `listener` **[function][10]** Event listener

Returns **[Recorder][6]** 

### stop

Stop recording and close file. NOTE: File will be flsuh async,

Returns **[undefined][19]**  TODO: return promise when flush is ended

## Player

MP4 recorder that allows to record several streams/tracks on a single mp4 file

### on

Add event listener

#### Parameters

-   `event` **[String][1]** Event name
-   `listener` **[function][10]** Event listener

Returns **[IncomingStream][12]** 

### once

Add event listener once

#### Parameters

-   `event` **[String][1]** Event name
-   `listener` **[function][10]** Event listener

Returns **[IncomingStream][12]** 

### off

Remove event listener

#### Parameters

-   `event` **[String][1]** Event name
-   `listener` **[function][10]** Event listener

Returns **[IncomingStream][12]** 

### getTracks

Get all the tracks

Returns **[Array][18]&lt;[IncomingStreamTrack][13]>** Array of tracks

### getAudioTracks

Get an array of the media stream audio tracks

Returns **[Array][18]&lt;[IncomingStreamTrack][13]>** Array of tracks

### getVideoTracks

Get an array of the media stream video tracks

Returns **[Array][18]&lt;[IncomingStreamTrack][13]>** Array of tracks

### play

Starts playback

#### Parameters

-   `params` **[Object][4]** 
    -   `params.repeat` **[Object][4]** Repeat playback when file is ended

### resume

Resume playback

### pause

Pause playback

### seek

Start playback from given time

#### Parameters

-   `time` **[Number][5]** in miliseconds

### stop

Stop playing and close file

## StreamerSession

Represent the connection between a local udp port and a remote one. It sends and/or receive plain RTP data.

### getLocalPort

Get the local rtp/udp port

Returns **[Number][5]** port number

### setRemote

Set the rempte rtp/udp ip and port

#### Parameters

-   `ip`  
-   `port`  

### getIncomingStreamTrack

Returns the incoming stream track associated with this streaming session

Returns **[IncomingStreamTrack][13]** 

### getOutgoingStreamTrack

Returns the outgoing stream track associated with this streaming session

Returns **[OutgoingStreamTrack][20]** 

### on

Add event listener

#### Parameters

-   `event` **[String][1]** Event name
-   `listener` **[function][10]** Event listener

Returns **[StreamerSession][16]** 

### once

Add event listener once

#### Parameters

-   `event` **[String][1]** Event name
-   `listener` **[function][10]** Event listener

Returns **[IncomingStream][12]** 

### off

Remove event listener

#### Parameters

-   `event` **[String][1]** Event name
-   `listener` **[function][10]** Event listener

Returns **[StreamerSession][16]** 

### stop

Closes udp socket and frees resources

## IncomingStream

The incoming streams represent the recived media stream from a remote peer.

### getId

The media stream id as announced on the SDP

Returns **[String][1]** 

### getStreamInfo

Get the stream info object for signaling the ssrcs and stream info on the SDP from the remote peer

Returns **StreamInfo** The stream info object

### on

Add event listener

#### Parameters

-   `event` **[String][1]** Event name
-   `listener` **[function][10]** Event listener

Returns **[IncomingStream][12]** 

### once

Add event listener once

#### Parameters

-   `event` **[String][1]** Event name
-   `listener` **[function][10]** Event listener

Returns **[IncomingStream][12]** 

### off

Remove event listener

#### Parameters

-   `event` **[String][1]** Event name
-   `listener` **[function][10]** Event listener

Returns **[IncomingStream][12]** 

### getStats

Get statistics for all tracks in the stream

See OutgoingStreamTrack.getStats for information about the stats returned by each track.

### getTrack

Get track by id

#### Parameters

-   `trackId` **[String][1]** The track id

Returns **[IncomingStreamTrack][13]** requested track or null

### getTracks

Get all the tracks

#### Parameters

-   `type` **[String][1]** The media type (Optional)

Returns **[Array][18]&lt;[IncomingStreamTrack][13]>** Array of tracks

### getAudioTracks

Get an array of the media stream audio tracks

Returns **[Array][18]&lt;[IncomingStreamTrack][13]>** Array of tracks

### getVideoTracks

Get an array of the media stream video tracks

Returns **[Array][18]&lt;[IncomingStreamTrack][13]>** Array of tracks

### createTrack

Create new track from a TrackInfo object and add it to this stream

#### Parameters

-   `trackInfo` **TrackInfo** Track info object

Returns **[IncomingStreamTrack][13]** 

### stop

Removes the media strem from the transport and also detaches from any attached incoming stream

## OutgoingStream

The incoming streams represent the media stream sent to a remote peer.

### getStats

Get statistics for all tracks in the stream

See OutgoingStreamTrack.getStats for information about the stats returned by each track.

### isMuted

Check if the stream is muted or not

Returns **[boolean][2]** muted

### attachTo

Listen media from the incoming stream and send it to the remote peer of the associated transport.

#### Parameters

-   `incomingStream` **[IncomingStream][12]** The incoming stream to listen media for

Returns **[Array][18]&lt;[Transponder][21]>** Track transponders array

### detach

Stop listening for media

### getStreamInfo

Get the stream info object for signaling the ssrcs and stream info on the SDP to the remote peer

Returns **StreamInfo** The stream info object

### getId

The media stream id as announced on the SDP

Returns **[String][1]** 

### on

Add event listener

#### Parameters

-   `event` **[String][1]** Event name
-   `listener` **[function][10]** Event listener

Returns **[IncomingStream][12]** 

### once

Add event listener once

#### Parameters

-   `event` **[String][1]** Event name
-   `listener` **[function][10]** Event listener

Returns **[IncomingStream][12]** 

### off

Remove event listener

#### Parameters

-   `event` **[String][1]** Event name
-   `listener` **[function][10]** Event listener

Returns **[OutgoingStream][15]** 

### getTracks

Get all the tracks

#### Parameters

-   `type` **[String][1]** The media type (Optional)

Returns **[Array][18]&lt;[OutgoingStreamTrack][20]>** Array of tracks

### getTrack

Get track by id

#### Parameters

-   `trackId` **[String][1]** The track id

Returns **[IncomingStreamTrack][13]** requested track or null

### getAudioTracks

Get an array of the media stream audio tracks

Returns **([Array][18] | OutgoingStreamTracks)** Array of tracks

### getVideoTracks

Get an array of the media stream video tracks

Returns **([Array][18] \| [OutgoingStreamTrack][20])** Array of tracks

### createTrack

Create new track from a TrackInfo object and add it to this stream

#### Parameters

-   `params` **([Object][4] | TrackInfo | [String][1])** Params plain object, StreamInfo object or media type
    -   `params.id` **[String][1]?** Stream track id
    -   `params.media` **[String][1]?** Media type ("audio" or "video")
    -   `params.ssrcs` **[Object][4]?** Override the generated ssrcs for this track
        -   `params.ssrcs.media` **[Number][5]?** ssrc for the track
        -   `params.ssrcs.rtx` **[Number][5]?** ssrc for the rtx video track
        -   `params.ssrcs.fec` **[Number][5]?** ssrc for the fec video track
-   `trackInfo` **TrackInfo** Track info object

Returns **[OutgoingStream][15]** The new outgoing stream

Returns **OuggoingStreamTrack** 

## IncomingStreamTrackMirrored

Mirror incoming stream from another endpoint. Used to avoid inter-thread synchronization when attaching multiple output streams.

### getStats

Get stats for all encodings from the original track

Returns **[Map][22]&lt;[String][1], [Object][4]>** Map with stats by encodingId

### getActiveLayers

Get active encodings and layers ordered by bitrate of the original track

Returns **[Object][4]** Active layers object containing an array of active and inactive encodings and an array of all available layer info

### getId

Get track id as signaled on the SDP

### getTrackInfo

Get track info object

Returns **TrackInfo** Track info

### getSSRCs

Return ssrcs associated to this track

Returns **[Object][4]** 

### getMedia

Get track media type

Returns **[String][1]** "audio"|"video"

### on

Add event listener

#### Parameters

-   `event` **[String][1]** Event name
-   `listener` **[function][10]** Event listener

Returns **[IncomingStreamTrack][13]** 

### once

Add event listener once

#### Parameters

-   `event` **[String][1]** Event name
-   `listener` **[function][10]** Event listener

Returns **[IncomingStream][12]** 

### off

Remove event listener

#### Parameters

-   `event` **[String][1]** Event name
-   `listener` **[function][10]** Event listener

Returns **[IncomingStreamTrack][13]** 

### attached

Signal that this track has been attached.
Internal use, you'd beter know what you are doing before calling this method

### refresh

Request an intra refres on all sources

### detached

Signal that this track has been detached.
Internal use, you'd beter know what you are doing before calling this method

### stop

Removes the track from the incoming stream and also detaches any attached outgoing track or recorder

## PeerConnectionServer

Manager of remoe peer connecion clients

### on

Add event listener

#### Parameters

-   `event` **[String][1]** Event name
-   `listeener` **[function][10]** Event listener

Returns **[PeerConnectionServer][23]** 

### once

Add event listener once

#### Parameters

-   `event` **[String][1]** Event name
-   `listener` **[function][10]** Event listener

Returns **[PeerConnectionServer][23]** 

### off

Remove event listener

#### Parameters

-   `event` **[String][1]** Event name
-   `listener` **[function][10]** Event listener

Returns **[PeerConnectionServer][23]** 

### stop

Stop the peerconnection server, will not stop the transport created by it

## Endpoint

An endpoint represent an UDP server socket.
The endpoint will process STUN requests in order to be able to associate the remote ip:port with the registered transport and forward any further data comming from that transport.
Being a server it is ICE-lite.

### setAffinity

Set cpu affinity for udp send/recv thread.

#### Parameters

-   `cpu` **[Number][5]** CPU core or -1 to reset affinity.

Returns **[boolean][2]** 

### setIceTimeout

Set ICE timeout for outgoing ICE binding requests

#### Parameters

-   `timeout` **[Number][5]** Ammount of time in milliseconds between ICE binding requests

### createTransport

Create a new transport object and register it with the remote ICE username and password

#### Parameters

-   `remoteInfo` **([Object][4] | SDPInfo)** Remote ICE and DTLS properties
-   `localInfo` **[Object][4]** Local ICE and DTLS properties (optional)
-   `options` **[Object][4]** Dictionary with transport properties
    -   `options.disableSTUNKeepAlive` **[boolean][2]** Disable ICE/STUN keep alives, required for server to server transports
    -   `options.srtpProtectionProfiles` **[String][1]** Colon delimited list of SRTP protection profile names

Returns **[Transport][9]** New transport object

### getLocalCandidates

Get local ICE candidates for this endpoint. It will be shared by all the transport associated to this endpoint.

Returns **Array.CandidateInfo** 

### getDTLSFingerprint

Get local DTLS fingerprint for this endpoint. It will be shared by all the transport associated to this endpoint.

Returns **[String][1]** 

### createOffer

Helper that creates an offer from capabilities
It generates a random ICE username and password and gets endpoint fingerprint

#### Parameters

-   `capabilities` **[Object][4]** Media capabilities as required by SDPInfo.create

Returns **SDPInfo** SDP offer

### createPeerConnectionServer

Create new peer connection server to manage remote peer connection clients

#### Parameters

-   `tm` **TransactionManager** 
-   `capabilities` **[Object][4]** Same as SDPInfo.answer capabilites

Returns **[PeerConnectionServer][23]** 

### mirrorIncomingStream

Mirror incoming stream from another endpoint. Used to avoid inter-thread synchronization when attaching multiple output streams.
The endpoint will cache the cucrrent mirrored streams and return an already existing object if calling this method twice with same stream.

#### Parameters

-   `incomingStream` **[IncomingStream][12]** stream to mirror

Returns **[IncomingStream][12]** mirrored stream.

### mirrorIncomingStreamTrack

Mirror incoming stream track from another endpoint. Used to avoid inter-thread synchronization when attaching multiple output tracks.
The endpoint will cache the cucrrent mirrored tracks and return an already existing object if calling this method twice with same track.

#### Parameters

-   `incomingStreamTrack` **[IncomingStreamTrack][13]** track to mirror

Returns **[IncomingStreamTrackMirrored][24]** mirrored track.

### createSDPManager

Create new SDP manager, this object will manage the SDP O/A for you and produce a suitable trasnport.

#### Parameters

-   `sdpSemantics` **[String][1]** Type of sdp plan "unified-plan" or "plan-b"
-   `capabilities` **[Object][4]** Capabilities objects

Returns **[SDPManager][11]** 

### on

Add event listener

#### Parameters

-   `event` **[String][1]** Event name
-   `listeener` **[function][10]** Event listener

Returns **[Endpoint][3]** 

### once

Add event listener once

#### Parameters

-   `event` **[String][1]** Event name
-   `listener` **[function][10]** Event listener

Returns **[Endpoint][3]** 

### off

Remove event listener

#### Parameters

-   `event` **[String][1]** Event name
-   `listener` **[function][10]** Event listener

Returns **[Endpoint][3]** 

### stop

Stop the endpoint UDP server and terminate any associated transport

## EmulatedTransport

An emulated transport reads data from a unencrypted pcap file (typically from a transport dump), and acts like if it was a live transport from a remote peer.
You must create the incoming streams as signaled on the remote SDP as any incoming RTP with an unknown ssrc will be ignored. The emulated transport does not allow creating outgoing streams.

### setRemoteProperties

Set remote RTP properties

#### Parameters

-   `rtp` **([Object][4] | SDPInfo)** Object param containing media information for audio and video
    -   `rtp.audio` **MediaInfo** Audio media info
    -   `rtp.video` **MediaInfo** Video media info

### on

Add event listener

#### Parameters

-   `event` **[String][1]** Event name
-   `listeener` **[function][10]** Event listener

Returns **[Transport][9]** 

### once

Add event listener once

#### Parameters

-   `event` **[String][1]** Event name
-   `listener` **[function][10]** Event listener

Returns **[IncomingStream][12]** 

### off

Remove event listener

#### Parameters

-   `event` **[String][1]** Event name
-   `listener` **[function][10]** Event listener

Returns **[Transport][9]** 

### createIncomingStream

Create an incoming stream object from the media stream info objet

#### Parameters

-   `info` **StreamInfo** Contains the ids and ssrcs of the stream to be created

Returns **[IncomingStream][12]** The newly created incoming stream object

### play

Starts playback

#### Parameters

-   `params` **[Object][4]** 
    -   `params.start` **[Object][4]** Set start time

### resume

Resume playback

### pause

Pause playback

### seek

Start playback from given time

#### Parameters

-   `time` **[Number][5]** in miliseconds

### stop

Stop transport and all the associated incoming and outgoing streams

## OutgoingStreamTrack

Audio or Video track of a media stream sent to a remote peer

### getId

Get track id as signaled on the SDP

### getMedia

Get track media type

Returns **[String][1]** "audio"|"video"

### getTrackInfo

Get track info object

Returns **TrackInfo** Track info

### getStats

Get stats for all encodings 

You will get stats for media, rtx and fec sources (if used):
{
  media: mediaStats,
  rtx  : rtxStats,
  fec  : fecStats
  timestmap : timestamp
}

The stats objects will privide the follwing info for each source

-   numPackets	: number of rtp packets sent
-   numRTCPPackets	: number of rtcp packsets sent
-   totalBytes	: total rtp sent bytes
-   totalRTCPBytes	: total rtp sent bytes
-   bitrate		: average bitrate sent during last second in bps

Returns **[Map][22]&lt;[String][1], [Object][4]>** Map with stats by encodingId

### getSSRCs

Return ssrcs associated to this track

Returns **[Object][4]** 

### isMuted

Check if the track is muted or not

Returns **[boolean][2]** muted

### isAttached

Check if this outgoing stream track is alredy attached to an incoming stream track.

Returns **[Boolean][2]** true if attached, false otherwise

### attachTo

Listen media from the incoming stream track and send it to the remote peer of the associated transport.
This will stop any previous transpoder created by a previous attach.

#### Parameters

-   `incomingStreamTrack` **[IncomingStreamTrack][13]** The incoming stream to listen media for

Returns **[Transponder][21]** Track transponder object

### detach

Stop forwarding any previous attached track.
This will set the transponder inconming track to null

### getTransponder

Get attached transpoder for this track

Returns **[Transponder][21]** Attached transpoder or null if not attached

### on

Add event listener

#### Parameters

-   `event` **[String][1]** Event name
-   `listener` **[function][10]** Event listener

Returns **[IncomingStreamTrack][13]** 

### once

Add event listener once

#### Parameters

-   `event` **[String][1]** Event name
-   `listener` **[function][10]** Event listener

Returns **[IncomingStream][12]** 

### off

Remove event listener

#### Parameters

-   `event` **[String][1]** Event name
-   `listener` **[function][10]** Event listener

Returns **[IncomingStreamTrack][13]** 

### stop

Removes the track from the outgoing stream and also detaches from any attached incoming track

## Transport

A transport represent a connection between a local ICE candidate and a remote set of ICE candidates over a single DTLS session.
The transport object will internally allocate the ICE and DTLS information of the local side in order to singal it to the remote side and establish the connection.
Each transport has a set of incoming and outgoing streams that allow to send or receive RTP streams to the remote peer. 
You must create the incoming streams as signaled on the remote SDP as any incoming RTP with an unknown ssrc will be ignored. 
When you create an outgoing stream, the transport will allocate internally the ssrcs for the different RTP streams in order to avoid collision. You will be able to retrieve that information from the streams object in order to be able to announce them on the SDP sent to the remote side.
In order to decide how to route your streams you must attach the outgoing streams from one transport to the incoming streams of other (or same) transport.

### dump

Dump incoming and outgoint rtp and rtcp packets into a pcap file

#### Parameters

-   `filename` **[String][1]** Filename of the pcap file
-   `options` **[Object][4]** Dump parameters (optional)
    -   `options.incoming` **[Boolean][2]** Dump incomoning RTP data
    -   `options.outgoing` **[Boolean][2]** Dump outgoing RTP data
    -   `options.rtcp` **[Boolean][2]** Dump rtcp RTP data
    -   `options.rtpHeadersOnly` **[Boolean][2]** Dump only rtp headers and first 16 bytes of payload for rtp packets
    -   `options.bwe` **[Boolean][2]**  Dump bwe stats to a different file (.pcap->.csv)

### getStats

Get transport stats

-   senderSideEstimationBitrate    : Sneder side estimation bitrate (if available)
-   ice      : ICE related stats


-   requestsSent		: Number of ice requests sent
-   requestsReceived	: Number of ice requests received
-   responsesSent		: Number of ice responses sent
-   responsesReceived	: Number of ice responses received

Returns **[Object][4]** stats

### setBandwidthProbing

Enable bitrate probing.
This will send padding only RTX packets to allow bandwidth estimation algortithm to probe bitrate beyonf current sent values.
The ammoung of probing bitrate would be limited by the sender bitrate estimation and the limit set on the setMaxProbing Bitrate.
Note that this will only work on browsers that supports RTX and transport wide cc.

#### Parameters

-   `probe` **Boolen** 

### setMaxProbingBitrate

Set the maximum bitrate to be used if probing is enabled.

#### Parameters

-   `bitrate` **[Number][5]** 

### setProbingBitrateLimit

Do not allow probing to increase sent bitrate above certain limit

#### Parameters

-   `bitrate` **[Number][5]** limit

### setLocalProperties

Set local RTP properties

#### Parameters

-   `rtp` **([Object][4] | SDPInfo)** Object param containing media information for audio and video
    -   `rtp.audio` **MediaInfo** Audio media info
    -   `rtp.video` **MediaInfo** Video media info

### setRemoteProperties

Set remote RTP properties

#### Parameters

-   `rtp` **([Object][4] | SDPInfo)** Object param containing media information for audio and video
    -   `rtp.audio` **MediaInfo** Audio media info
    -   `rtp.video` **MediaInfo** Video media info

### on

Add event listener

#### Parameters

-   `event` **[String][1]** Event name
-   `listeener` **[function][10]** Event listener

Returns **[Transport][9]** 

### once

Add event listener once

#### Parameters

-   `event` **[String][1]** Event name
-   `listener` **[function][10]** Event listener

Returns **[IncomingStream][12]** 

### off

Remove event listener

#### Parameters

-   `event` **[String][1]** Event name
-   `listener` **[function][10]** Event listener

Returns **[Transport][9]** 

### getDTLSSatate

Get current dtls state for transport

Returns **[String][1]** DTLS connection state as per the w3c spec  "new", "connecting", "connected", "closed", "failed"

### getLocalDTLSInfo

Get transport local DTLS info

Returns **DTLSInfo** DTLS info object

### getLocalICEInfo

Get transport local ICE info

Returns **ICEInfo** ICE info object

### getLocalCandidates

Get local ICE candidates for this transport

Returns **Array.CandidateInfo** 

### getRemoteCandidates

Get remote ICE candidates for this transport

Returns **Array.CandidateInfo** 

### addRemoteCandidate

Register a remote candidate info. Only needed for ice-lite to ice-lite endpoints

#### Parameters

-   `candidate` **CandidateInfo** 

Returns **[boolean][2]** Wheter the remote ice candidate was alrady presnet or not

### addRemoteCandidates

Register an array remote candidate info. Only needed for ice-lite to ice-lite endpoints

#### Parameters

-   `candidates` **Array.CandidateInfo** 

### createOutgoingStream

Create new outgoing stream in this transport

#### Parameters

-   `params` **([Object][4] | StreamInfo | [String][1])** Params plain object, StreamInfo object or stream id
    -   `params.audio` **([Array][18]&lt;[Object][4]> | [Object][4] \| [boolean][2])** Add audio track to the new stream
        -   `params.audio.id` **[Object][4]?** Stream track id (default: "audio")
        -   `params.audio.ssrcs` **[Number][5]?** Override the generated ssrcs for this track
            -   `params.audio.ssrcs.media` **[Number][5]?** ssrc for the audio track
    -   `params.id` **[Object][4]?** Stream id, an UUID will be generated if not provided
    -   `params.video` **([Array][18]&lt;[Object][4]> | [Object][4] \| [boolean][2])** Add video track to the new stream
        -   `params.video.id` **[Object][4]?** Stream track id (default: "video")
        -   `params.video.ssrcs` **[Object][4]?** Override the generated ssrcs for this track
            -   `params.video.ssrcs.media` **[Number][5]?** ssrc for the video track
            -   `params.video.ssrcs.rtx` **[Number][5]?** ssrc for the rtx video track
            -   `params.video.ssrcs.fec` **[Number][5]?** ssrc for the fec video track

Returns **[OutgoingStream][15]** The new outgoing stream

### createOutgoingStreamTrack

Create new outgoing stream in this transport

#### Parameters

-   `media` **[String][1]** Track media type "audio" or "video"
-   `params` **[Object][4]?** Track parameters
    -   `params.id` **[Object][4]?** Stream track id
    -   `params.ssrcs` **[Number][5]?** Override the generated ssrcs for this track
        -   `params.ssrcs.media` **[Number][5]?** ssrc for the media track
        -   `params.ssrcs.rtx` **[Number][5]?** ssrc for the rtx track
        -   `params.ssrcs.fec` **[Number][5]?** ssrc for the fec track

Returns **[OutgoingStreamTrack][20]** The new outgoing stream track

### createIncomingStream

Create an incoming stream object from the media stream info objet

#### Parameters

-   `info` **(StreamInfo | [Object][4])** Contains the ids and ssrcs of the stream to be created

Returns **[IncomingStream][12]** The newly created incoming stream object

### getIncomingStreams

Get all the incoming streams in the transport

Returns **[Array][18]&lt;IncomingStreams>** 

### getIncomingStream

Get incoming stream

#### Parameters

-   `streamId` **[String][1]** the stream ID

Returns **[IncomingStream][12]** 

### getOutgoingStreams

Get all the outgoing streams in the transport

Returns **[Array][18]&lt;OutgoingStreams>** 

### getOutgoingStream

Get incoming stream

#### Parameters

-   `streamId` **[String][1]** the stream ID

Returns **[IncomingStream][12]** 

### createIncomingStreamTrack

Create new incoming stream in this transport. TODO: Simulcast is still not supported

#### Parameters

-   `media` **[String][1]** Track media type "audio" or "video"
-   `params` **[Object][4]?** Track parameters
    -   `params.id` **[Object][4]?** Stream track id
    -   `params.ssrcs` **[Number][5]?** Override the generated ssrcs for this track
        -   `params.ssrcs.media` **[Number][5]?** ssrc for the media track
        -   `params.ssrcs.rtx` **[Number][5]?** ssrc for the rtx track
        -   `params.ssrcs.fec` **[Number][5]?** ssrc for the fec track

Returns **[IncomingStreamTrack][13]** The new incoming stream track

### publish

Create new outgoing stream and attach to the incoming stream

#### Parameters

-   `incomingStream` **[IncomingStream][12]** the incoming stream to be published in this transport

Returns **[OutgoingStream][15]** The new outgoing stream

### stop

Stop transport and all the associated incoming and outgoing streams

## IncomingStreamTrack

Audio or Video track of a remote media stream

### getStats

Get stats for all encodings 

For each encoding you will get stats for media, rtx and fec sources (if used):

-   media    : Stats for the media stream
-   rtx      : Stats for the rtx retransmission stream
-   fec      : Stats for the fec stream
-   rtt      : Round Trip Time in ms
-   waitTime : "min","max" and "avg" packet waiting times in rtp buffer before delivering them
-   bitrate  : Bitrate for media stream only in bps
-   total    : Accumulated bitrate for rtx, media and fec streams in bps
-   remb     : Estimated avialable bitrate for receving (only avaailable if not using tranport wide cc)
-   timestamp: When this stats was generated, in order to save workload, stats are cached for 200ms
-   simulcastIdx : Simulcast layer index based on bitrate received (-1 if it is inactive).

The stats objects will provide the follwing info for each source

-   lostPackets	: total lost packkets
-   dropPackets       : droppted packets by media server
-   numPackets	: number of rtp packets received
-   numRTCPPackets	: number of rtcp packsets received
-   totalBytes	: total rtp received bytes
-   totalRTCPBytes	: total rtp received bytes
-   totalPLIs		: total PLIs sent
-   totalNACKs	: total NACk packets sent
-   bitrate		: average bitrate received during last second in bps
-   skew		: difference between NTP timestamp and RTP timestamps at sender (from RTCP SR)
-   drift		: ratio between RTP timestamps and the NTP timestamp and  at sender (from RTCP SR)
-   clockRate		: RTP clockrate
-   layers		: Information about each spatial/temporal layer (if present)
    -   spatialLayerId  : Spatial layer id
    -   temporalLayerId : Temporatl layer id
    -   totalBytes	: total rtp received bytes for this layer
    -   numPackets	: number of rtp packets received for this layer
    -   bitrate		: average bitrate received during last second for this layer

Returns **[Map][22]&lt;[String][1], [Object][4]>** Map with stats by encodingId

### getActiveLayers

Get active encodings and layers ordered by bitrate

Returns **[Object][4]** Active layers object containing an array of active and inactive encodings and an array of all available layer info

### getId

Get track id as signaled on the SDP

### getTrackInfo

Get track info object

Returns **TrackInfo** Track info

### getSSRCs

Return ssrcs associated to this track

Returns **[Object][4]** 

### getMedia

Get track media type

Returns **[String][1]** "audio"|"video"

### on

Add event listener

#### Parameters

-   `event` **[String][1]** Event name
-   `listener` **[function][10]** Event listener

Returns **[IncomingStreamTrack][13]** 

### once

Add event listener once

#### Parameters

-   `event` **[String][1]** Event name
-   `listener` **[function][10]** Event listener

Returns **[IncomingStream][12]** 

### off

Remove event listener

#### Parameters

-   `event` **[String][1]** Event name
-   `listener` **[function][10]** Event listener

Returns **[IncomingStreamTrack][13]** 

### attached

Signal that this track has been attached.
Internal use, you'd beter know what you are doing before calling this method

### refresh

Request an intra refres on all sources

### detached

Signal that this track has been detached.
Internal use, you'd beter know what you are doing before calling this method

### setH264ParameterSets

Store out of band h264 properties for this track

#### Parameters

-   `sprop` **[String][1]** Base64 encoded parameters from SDP

### hasH264ParameterSets

Check if track has out of band h264 properties

Returns **[Boolean][2]** 

### getH264ParameterSets

Get out of band h264 parameters from this track

Returns **[Boolean][2]** 

### stop

Removes the track from the incoming stream and also detaches any attached outgoing track or recorder

[1]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String

[2]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean

[3]: #endpoint

[4]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object

[5]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number

[6]: #recorder

[7]: #player

[8]: #streamer

[9]: #transport

[10]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function

[11]: #sdpmanager

[12]: #incomingstream

[13]: #incomingstreamtrack

[14]: #recordertrack

[15]: #outgoingstream

[16]: #streamersession

[17]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Date

[18]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array

[19]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/undefined

[20]: #outgoingstreamtrack

[21]: #transponder

[22]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Map

[23]: #peerconnectionserver

[24]: #incomingstreamtrackmirrored
